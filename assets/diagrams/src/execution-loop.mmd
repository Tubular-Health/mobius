%%{init: {'theme': 'dark', 'themeVariables': { 'primaryColor': '#8B5CF6', 'primaryTextColor': '#fff', 'primaryBorderColor': '#7C3AED', 'lineColor': '#6366F1', 'secondaryColor': '#3B82F6', 'tertiaryColor': '#10B981'}}}%%
flowchart TB
    START([Start: mobius ABC-123]) --> FIND

    subgraph Loop["<b>Execution Loop</b>"]
        FIND["Find next ready task<br/><i>Respects blockedBy</i>"]
        IMPL["Implement change<br/><i>Single-file focus</i>"]
        VALID["Validate<br/><i>Tests, typecheck, lint</i>"]
        COMMIT["Commit & push"]
        UPDATE["Update status<br/><i>Mark complete in Linear</i>"]
        CHECK{More tasks?}

        FIND --> IMPL
        IMPL --> VALID
        VALID --> COMMIT
        COMMIT --> UPDATE
        UPDATE --> CHECK
        CHECK -->|Yes| FIND
    end

    CHECK -->|No| DONE([Done])

    style START fill:#3B82F6,color:#fff,stroke:#2563EB
    style FIND fill:#8B5CF6,color:#fff,stroke:#7C3AED
    style IMPL fill:#8B5CF6,color:#fff,stroke:#7C3AED
    style VALID fill:#8B5CF6,color:#fff,stroke:#7C3AED
    style COMMIT fill:#8B5CF6,color:#fff,stroke:#7C3AED
    style UPDATE fill:#8B5CF6,color:#fff,stroke:#7C3AED
    style CHECK fill:#6366F1,color:#fff,stroke:#4F46E5
    style DONE fill:#10B981,color:#fff,stroke:#059669
