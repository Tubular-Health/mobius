%%{init: {'theme': 'dark', 'themeVariables': { 'primaryColor': '#8B5CF6', 'primaryTextColor': '#fff', 'primaryBorderColor': '#7C3AED', 'lineColor': '#6366F1', 'secondaryColor': '#3B82F6', 'tertiaryColor': '#10B981'}}}%%
flowchart TB
    subgraph S1[" "]
        direction TB
        D1["<b>/define</b>"]
        D1D["Create issue with<br/>acceptance criteria"]
    end

    subgraph S2[" "]
        direction TB
        D2["<b>/refine</b>"]
        D2D["Break into sub-tasks<br/>with dependencies"]
    end

    subgraph S3[" "]
        direction TB
        D3["<b>mobius loop</b>"]
        D3D["Execute sub-tasks<br/>with parallel agents"]
    end

    subgraph S4[" "]
        direction TB
        D4["<b>/verify</b>"]
        D4D["Validate against<br/>acceptance criteria"]
    end

    subgraph S5[" "]
        direction TB
        D5["<b>mobius submit</b>"]
        D5D["Create PR with<br/>linked issues"]
    end

    S1 --> S2
    S2 --> S3
    S3 --> S4
    S4 --> S5

    style D1 fill:#3B82F6,color:#fff,stroke:#2563EB
    style D2 fill:#8B5CF6,color:#fff,stroke:#7C3AED
    style D3 fill:#8B5CF6,color:#fff,stroke:#7C3AED
    style D4 fill:#8B5CF6,color:#fff,stroke:#7C3AED
    style D5 fill:#10B981,color:#fff,stroke:#059669

    style D1D fill:transparent,color:#94A3B8,stroke:none
    style D2D fill:transparent,color:#94A3B8,stroke:none
    style D3D fill:transparent,color:#94A3B8,stroke:none
    style D4D fill:transparent,color:#94A3B8,stroke:none
    style D5D fill:transparent,color:#94A3B8,stroke:none

    style S1 fill:transparent,stroke:#475569,stroke-width:1px
    style S2 fill:transparent,stroke:#475569,stroke-width:1px
    style S3 fill:transparent,stroke:#475569,stroke-width:1px
    style S4 fill:transparent,stroke:#475569,stroke-width:1px
    style S5 fill:transparent,stroke:#475569,stroke-width:1px
